---
import CardFilter from "../../components/CardFilter.astro";
import LayouteFilterCode from "../../layouts/LayouteFilterCode.astro";
import { tagCard } from "../../utils";

const listMenuCode = [
  {
    href: "/code/animation",
    icon: "/svg/tag-animation.svg",
    name: "animation",
  },
  {
    href: "/code/css",
    icon: "/svg/tag-css.svg",
    name: "css",
  },
  {
    href: "/code/patterns",
    icon: "/svg/tag-patterns.svg",
    name: "patterns",
  },
  {
    href: "/code/javascript",
    icon: "/svg/tag-js.svg",
    name: "javascript",
  },
  {
    href: "/code/typescript",
    icon: "/svg/tag-angular.svg",
    name: "angular",
  },
  {
    href: "/code/react",
    icon: "/svg/tag-react.svg",
    name: "react",
  },
];

const allPosts = await Astro.glob("/src/pages/post/*.md");
const filterCode = allPosts.filter((post) =>
  post.frontmatter.category === "code"
);

/* const list = allPosts.filter(post => post.frontmatter.category === "code")

console.log(list.length) */
---

<LayouteFilterCode title="code">
  <main class="w-full min-h-screen max-w-[1440px] mx-auto">
    <ul class="max-w-[1440px] mx-auto grid grid-cols-gridPosts gap-y-8">
      {
        filterCode.map((item) => {
          const { image, tags, title, description } = item.frontmatter;
          let valueTag = tagCard.filter(
            (item: { name: string }) => /* item.name === tags[0] */tags.includes(item.name)
          );
          /* console.log(valueTag) */
          return (
            <CardFilter
              image={image.url}
              title={title}
              description={description}
              tag={valueTag}
            />
          );
        })
      }
    </ul>
  </main>
</LayouteFilterCode>
